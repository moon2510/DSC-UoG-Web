{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resources/js/admin.js","webpack:///./node_modules/trumbowyg/dist/trumbowyg.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$","trumbowyg","svgPath","click","e","preventDefault","toggleClass","tooltip","template","jQuery","langs","en","viewHTML","undo","redo","formatting","blockquote","code","header","bold","italic","strikethrough","underline","strong","em","del","superscript","subscript","unorderedList","orderedList","insertImage","link","createLink","unlink","justifyLeft","justifyCenter","justifyRight","justifyFull","horizontalRule","removeformat","fullscreen","close","submit","reset","required","description","title","text","target","width","plugins","svgAbsoluteUseHref","hideButtonTexts","lang","fixedBtnPane","fixedFullWidth","autogrow","autogrowOnEnter","imageWidthModalEdit","prefix","tagClasses","semantic","semanticKeepAttributes","resetCss","removeformatPasted","tabToIndent","tagsToRemove","tagsToKeep","btns","btnsDef","changeActiveDropdownIcon","inlineElementsSelector","pasteHandlers","urlProtocol","minimalLinks","defaultLinkTarget","undefined","writable","configurable","navigator","window","document","fn","options","params","this","each","data","Trumbowyg","length","execCmd","cmd","param","forceCss","skipTrumbowyg","openModal","content","closeModal","openModalInsert","fields","callback","saveRange","range","getRangeText","restoreRange","setDisabled","toggle","destroy","empty","html","editorElem","$trumbowyg","doc","ownerDocument","$ta","$c","extend","svgPathOption","hasSvg","scriptElement","source","src","matches","match","substring","indexOf","console","warn","div","createElement","id","body","insertBefore","childNodes","ajax","async","type","contentType","dataType","crossDomain","url","beforeSend","complete","success","innerHTML","XMLSerializer","serializeToString","documentElement","baseHref","querySelector","location","href","split","h","isBlinkFunction","chrome","Intl","v8BreakIterator","class","isSupported","h1","h2","h3","h4","h5","h6","tag","dropdown","ico","defaultOptions","imgDblClickHandler","getDefaultImgDblClickHandler","urlPrefix","setupUrlPrefix","disabled","nodeName","btnName","btnDef","addBtnDef","eventNamespace","keys","tagToButton","tagHandlers","concat","isIE","userAgent","appVersion","isMac","platform","toUpperCase","init","DEFAULT_SEMANTIC_MAP","height","initPlugins","execCommand","buildEditor","buildBtnPane","fixedBtnPaneEvents","buildOverlay","setTimeout","trigger","protocol","replace","$box","isTextarea","is","val","$ed","insertAfter","append","attr","syncCode","addClass","contenteditable","dir","_dir","tabindex","add","css","semanticCode","debounceButtonPaneStatus","ctrl","composition","on","keyCode","which","toggleSpan","ctrlKey","metaKey","altKey","shiftKey","String","fromCharCode","compositionEndIE","clearTimeout","updateButtonPaneStatus","clearButtonPaneStatus","autogrowOnEnterDontClose","autogrowOnEnterWasFocused","autogrowEditorOnEnter","block","getSelection","deleteFromDocument","clipboardData","getData","selection","createRange","pasteHTML","getRangeAt","insertNode","createTextNode","originalEvent","pasteHandler","removeClass","oldHeight","clientHeight","totalHeight","scrollHeight","$btnPane","btnGrp","isArray","$btnGroup","btn","isSupportedBtn","buildBtn","trim","prepend","isDropdown","hasIcon","textDef","$btn","toLowerCase","mousedown","hasClass","dropdownPrefix","dropdownOptions","dropdownClass","$dropdown","def","buildSubBtn","hide","style","$overlay","appendTo","showOverlay","fadeIn","hideOverlay","fadeOut","isFixed","scrollTop","offset","top","$buttonPane","buttonPaneOuterHeight","outerHeight","position","left","zIndex","paddingTop","removeAttr","disable","after","show","off","destroyPlugins","remove","removeData","activeElement","blur","addFlag","find","contents","unwrap","$body","btnOffsetLeft","syncTextarea","join","force","safe","full","keepRange","collapsed","semanticTag","blockElementsSelector","filter","nodeType","nodeValue","wrap","wrapInlinesInParagraphsFrom","$from","$finalParagraph","nextUntil","addBack","wrapAll","parent","$nextElement","nextAll","first","next","children","oldTag","copyAttributes","revert","newTag","tmpTag","resetRange","$oldTag","startContainer","parentNode","$newTag","prop","selectNodeContents","collapse","documentSelection","selectedRange","node","focusNode","cloneContents","$a","selectNode","removeAllRanges","addRange","label","linkUrl","v","prependUrlPrefix","deleteContents","test","isCollapsed","alt","$img","isFullscreen","fullscreenCssClass","fullscreenPlaceholderClass","editorHeight","before","focus","e2","listId","classes","buildForm","formOrContent","$modal","one","action","opacity","paddingBottom","animate","prependTo","buildModalBtn","$modalBox","lg","fieldName","field","a","attributes","map","$form","valid","values","$field","addErrorOnModalField","pattern","patternError","err","spanErrorClass","$label","parseInt","rangeCount","rangeStart","savedRange","setEnd","startOffset","metaRange","start","end","charIndex","nodeStack","foundStart","stop","pop","nextCharIndex","setStart","cn","push","activeClasses","originalIconClass","tags","getTagsRecursive","$btnSvgUse","dropdownBtnName","$dropdownBtn","$dropdownBtnSvgUse","element","tagName","textAlign","tagHandler","loadedPlugins","plugin","shouldInit"],"mappings":"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","file":"/js/admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 37);\n","import 'trumbowyg'\r\n\r\n$('.trumbowyg-form').trumbowyg({\r\n  svgPath: '/js/ui/icons.svg'\r\n})\r\n\r\n// Toggle the side navigation\r\n$('#sidenavToggler').click(function (e) {\r\n  e.preventDefault()\r\n  $('body').toggleClass('sidenav-toggled')\r\n})\r\n\r\n// Configure tooltips for collapsed side navigation\r\n$('.navbar-sidenav [data-toggle=\"tooltip\"]').tooltip({\r\n  template: '<div class=\"tooltip navbar-sidenav-tooltip\" role=\"tooltip\"><div class=\"arrow\"></div><div class=\"tooltip-inner\"></div></div>'\r\n})\r\n","/**\n * Trumbowyg v2.23.0 - A lightweight WYSIWYG editor\n * Trumbowyg core file\n * ------------------------\n * @link http://alex-d.github.io/Trumbowyg\n * @license MIT\n * @author Alexandre Demode (Alex-D)\n *         Twitter : @AlexandreDemode\n *         Website : alex-d.fr\n */\n\njQuery.trumbowyg = {\n    langs: {\n        en: {\n            viewHTML: 'View HTML',\n\n            undo: 'Undo',\n            redo: 'Redo',\n\n            formatting: 'Formatting',\n            p: 'Paragraph',\n            blockquote: 'Quote',\n            code: 'Code',\n            header: 'Header',\n\n            bold: 'Bold',\n            italic: 'Italic',\n            strikethrough: 'Strikethrough',\n            underline: 'Underline',\n\n            strong: 'Strong',\n            em: 'Emphasis',\n            del: 'Deleted',\n\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n\n            unorderedList: 'Unordered list',\n            orderedList: 'Ordered list',\n\n            insertImage: 'Insert Image',\n            link: 'Link',\n            createLink: 'Insert link',\n            unlink: 'Remove link',\n\n            justifyLeft: 'Align Left',\n            justifyCenter: 'Align Center',\n            justifyRight: 'Align Right',\n            justifyFull: 'Align Justify',\n\n            horizontalRule: 'Insert horizontal rule',\n            removeformat: 'Remove format',\n\n            fullscreen: 'Fullscreen',\n\n            close: 'Close',\n\n            submit: 'Confirm',\n            reset: 'Cancel',\n\n            required: 'Required',\n            description: 'Description',\n            title: 'Title',\n            text: 'Text',\n            target: 'Target',\n            width: 'Width'\n        }\n    },\n\n    // Plugins\n    plugins: {},\n\n    // SVG Path globally\n    svgPath: null,\n    svgAbsoluteUseHref: false,\n\n    hideButtonTexts: null\n};\n\n// Makes default options read-only\nObject.defineProperty(jQuery.trumbowyg, 'defaultOptions', {\n    value: {\n        lang: 'en',\n\n        fixedBtnPane: false,\n        fixedFullWidth: false,\n        autogrow: false,\n        autogrowOnEnter: false,\n        imageWidthModalEdit: false,\n        hideButtonTexts: null,\n\n        prefix: 'trumbowyg-',\n        tagClasses: {},\n        semantic: true,\n        semanticKeepAttributes: false,\n        resetCss: false,\n        removeformatPasted: false,\n        tabToIndent: false,\n        tagsToRemove: [],\n        tagsToKeep: ['hr', 'img', 'embed', 'iframe', 'input'],\n        btns: [\n            ['viewHTML'],\n            ['undo', 'redo'], // Only supported in Blink browsers\n            ['formatting'],\n            ['strong', 'em', 'del'],\n            ['superscript', 'subscript'],\n            ['link'],\n            ['insertImage'],\n            ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'],\n            ['unorderedList', 'orderedList'],\n            ['horizontalRule'],\n            ['removeformat'],\n            ['fullscreen']\n        ],\n        // For custom button definitions\n        btnsDef: {},\n        changeActiveDropdownIcon: false,\n\n        inlineElementsSelector: 'a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u',\n\n        pasteHandlers: [],\n\n        // imgDblClickHandler: default is defined in constructor\n\n        plugins: {},\n\n        urlProtocol: false,\n        minimalLinks: false,\n        defaultLinkTarget: undefined,\n\n        svgPath: null\n    },\n    writable: false,\n    enumerable: true,\n    configurable: false\n});\n\n(function (navigator, window, document, $) {\n    'use strict';\n\n    var CONFIRM_EVENT = 'tbwconfirm',\n        CANCEL_EVENT = 'tbwcancel';\n\n    $.fn.trumbowyg = function (options, params) {\n        var trumbowygDataName = 'trumbowyg';\n        if (options === Object(options) || !options) {\n            return this.each(function () {\n                if (!$(this).data(trumbowygDataName)) {\n                    $(this).data(trumbowygDataName, new Trumbowyg(this, options));\n                }\n            });\n        }\n        if (this.length === 1) {\n            try {\n                var t = $(this).data(trumbowygDataName);\n                switch (options) {\n                    // Exec command\n                    case 'execCmd':\n                        return t.execCmd(params.cmd, params.param, params.forceCss, params.skipTrumbowyg);\n\n                    // Modal box\n                    case 'openModal':\n                        return t.openModal(params.title, params.content);\n                    case 'closeModal':\n                        return t.closeModal();\n                    case 'openModalInsert':\n                        return t.openModalInsert(params.title, params.fields, params.callback);\n\n                    // Range\n                    case 'saveRange':\n                        return t.saveRange();\n                    case 'getRange':\n                        return t.range;\n                    case 'getRangeText':\n                        return t.getRangeText();\n                    case 'restoreRange':\n                        return t.restoreRange();\n\n                    // Enable/disable\n                    case 'enable':\n                        return t.setDisabled(false);\n                    case 'disable':\n                        return t.setDisabled(true);\n\n                    // Toggle\n                    case 'toggle':\n                        return t.toggle();\n\n                    // Destroy\n                    case 'destroy':\n                        return t.destroy();\n\n                    // Empty\n                    case 'empty':\n                        return t.empty();\n\n                    // HTML\n                    case 'html':\n                        return t.html(params);\n                }\n            } catch (c) {\n            }\n        }\n\n        return false;\n    };\n\n    // @param: editorElem is the DOM element\n    var Trumbowyg = function (editorElem, options) {\n        var t = this,\n            trumbowygIconsId = 'trumbowyg-icons',\n            $trumbowyg = $.trumbowyg;\n\n        // Get the document of the element. It use to makes the plugin\n        // compatible on iframes.\n        t.doc = editorElem.ownerDocument || document;\n\n        // jQuery object of the editor\n        t.$ta = $(editorElem); // $ta : Textarea\n        t.$c = $(editorElem); // $c : creator\n\n        options = options || {};\n\n        // Localization management\n        if (options.lang != null || $trumbowyg.langs[options.lang] != null) {\n            t.lang = $.extend(true, {}, $trumbowyg.langs.en, $trumbowyg.langs[options.lang]);\n        } else {\n            t.lang = $trumbowyg.langs.en;\n        }\n\n        t.hideButtonTexts = $trumbowyg.hideButtonTexts != null ? $trumbowyg.hideButtonTexts : options.hideButtonTexts;\n\n        // SVG path\n        var svgPathOption = $trumbowyg.svgPath != null ? $trumbowyg.svgPath : options.svgPath;\n        t.hasSvg = svgPathOption !== false;\n\n        if (svgPathOption !== false && ($trumbowyg.svgAbsoluteUseHref || $('#' + trumbowygIconsId, t.doc).length === 0)) {\n            if (svgPathOption == null) {\n                // Hack to get svgPathOption based on trumbowyg.js path\n                var $scriptElements = $('script[src]');\n                $scriptElements.each(function (i, scriptElement) {\n                    var source = scriptElement.src;\n                    var matches = source.match('trumbowyg(\\.min)?\\.js');\n                    if (matches != null) {\n                        svgPathOption = source.substring(0, source.indexOf(matches[0])) + 'ui/icons.svg';\n                    }\n                });\n            }\n\n            // Do not merge with previous if block: svgPathOption can be redefined in it.\n            // Here we are checking that we find a match\n            if (svgPathOption == null) {\n                console.warn('You must define svgPath: https://goo.gl/CfTY9U'); // jshint ignore:line\n            } else if (!$trumbowyg.svgAbsoluteUseHref) {\n                var div = t.doc.createElement('div');\n                div.id = trumbowygIconsId;\n                t.doc.body.insertBefore(div, t.doc.body.childNodes[0]);\n                $.ajax({\n                    async: true,\n                    type: 'GET',\n                    contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n                    dataType: 'xml',\n                    crossDomain: true,\n                    url: svgPathOption,\n                    data: null,\n                    beforeSend: null,\n                    complete: null,\n                    success: function (data) {\n                        div.innerHTML = new XMLSerializer().serializeToString(data.documentElement);\n                    }\n                });\n            }\n        }\n\n        var baseHref = !!t.doc.querySelector('base') ? window.location.href.split(/[?#]/)[0] : '';\n        t.svgPath = $trumbowyg.svgAbsoluteUseHref ? svgPathOption : baseHref;\n\n\n        /**\n         * When the button is associated to a empty object\n         * fn and title attributes are defined from the button key value\n         *\n         * For example\n         *      foo: {}\n         * is equivalent to :\n         *      foo: {\n         *          fn: 'foo',\n         *          title: this.lang.foo\n         *      }\n         */\n        var h = t.lang.header, // Header translation\n            isBlinkFunction = function () {\n                return (window.chrome || (window.Intl && Intl.v8BreakIterator)) && 'CSS' in window;\n            };\n        t.btnsDef = {\n            viewHTML: {\n                fn: 'toggle',\n                class: 'trumbowyg-not-disable',\n            },\n\n            undo: {\n                isSupported: isBlinkFunction,\n                key: 'Z'\n            },\n            redo: {\n                isSupported: isBlinkFunction,\n                key: 'Y'\n            },\n\n            p: {\n                fn: 'formatBlock'\n            },\n            blockquote: {\n                fn: 'formatBlock'\n            },\n            h1: {\n                fn: 'formatBlock',\n                title: h + ' 1'\n            },\n            h2: {\n                fn: 'formatBlock',\n                title: h + ' 2'\n            },\n            h3: {\n                fn: 'formatBlock',\n                title: h + ' 3'\n            },\n            h4: {\n                fn: 'formatBlock',\n                title: h + ' 4'\n            },\n            h5: {\n                fn: 'formatBlock',\n                title: h + ' 5'\n            },\n            h6: {\n                fn: 'formatBlock',\n                title: h + ' 6'\n            },\n            subscript: {\n                tag: 'sub'\n            },\n            superscript: {\n                tag: 'sup'\n            },\n\n            bold: {\n                key: 'B',\n                tag: 'b'\n            },\n            italic: {\n                key: 'I',\n                tag: 'i'\n            },\n            underline: {\n                tag: 'u'\n            },\n            strikethrough: {\n                tag: 'strike'\n            },\n\n            strong: {\n                fn: 'bold',\n                key: 'B'\n            },\n            em: {\n                fn: 'italic',\n                key: 'I'\n            },\n            del: {\n                fn: 'strikethrough'\n            },\n\n            createLink: {\n                key: 'K',\n                tag: 'a'\n            },\n            unlink: {},\n\n            insertImage: {},\n\n            justifyLeft: {\n                tag: 'left',\n                forceCss: true\n            },\n            justifyCenter: {\n                tag: 'center',\n                forceCss: true\n            },\n            justifyRight: {\n                tag: 'right',\n                forceCss: true\n            },\n            justifyFull: {\n                tag: 'justify',\n                forceCss: true\n            },\n\n            unorderedList: {\n                fn: 'insertUnorderedList',\n                tag: 'ul'\n            },\n            orderedList: {\n                fn: 'insertOrderedList',\n                tag: 'ol'\n            },\n\n            horizontalRule: {\n                fn: 'insertHorizontalRule'\n            },\n\n            removeformat: {},\n\n            fullscreen: {\n                class: 'trumbowyg-not-disable'\n            },\n            close: {\n                fn: 'destroy',\n                class: 'trumbowyg-not-disable'\n            },\n\n            // Dropdowns\n            formatting: {\n                dropdown: ['p', 'blockquote', 'h1', 'h2', 'h3', 'h4'],\n                ico: 'p'\n            },\n            link: {\n                dropdown: ['createLink', 'unlink']\n            }\n        };\n\n        // Default Options\n        t.o = $.extend(true, {}, $trumbowyg.defaultOptions, options);\n        if (!t.o.hasOwnProperty('imgDblClickHandler')) {\n            t.o.imgDblClickHandler = t.getDefaultImgDblClickHandler();\n        }\n\n        t.urlPrefix = t.setupUrlPrefix();\n\n        t.disabled = t.o.disabled || (editorElem.nodeName === 'TEXTAREA' && editorElem.disabled);\n\n        if (options.btns) {\n            t.o.btns = options.btns;\n        } else if (!t.o.semantic) {\n            t.o.btns[3] = ['bold', 'italic', 'underline', 'strikethrough'];\n        }\n\n        $.each(t.o.btnsDef, function (btnName, btnDef) {\n            t.addBtnDef(btnName, btnDef);\n        });\n\n        // put this here in the event it would be merged in with options\n        t.eventNamespace = 'trumbowyg-event';\n\n        // Keyboard shortcuts are load in this array\n        t.keys = [];\n\n        // Tag to button dynamically hydrated\n        t.tagToButton = {};\n        t.tagHandlers = [];\n\n        // Admit multiple paste handlers\n        t.pasteHandlers = [].concat(t.o.pasteHandlers);\n\n        // Check if browser is IE\n        t.isIE = navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') !== -1;\n\n        // Check if we are on macOs\n        t.isMac = navigator.platform.toUpperCase().indexOf('MAC') !== -1;\n\n        t.init();\n    };\n\n    Trumbowyg.prototype = {\n        DEFAULT_SEMANTIC_MAP: {\n            'b': 'strong',\n            'i': 'em',\n            's': 'del',\n            'strike': 'del',\n            'div': 'p'\n        },\n\n        init: function () {\n            var t = this;\n            t.height = t.$ta.height();\n\n            t.initPlugins();\n\n            try {\n                // Disable image resize, try-catch for old IE\n                t.doc.execCommand('enableObjectResizing', false, false);\n                t.doc.execCommand('defaultParagraphSeparator', false, 'p');\n            } catch (e) {\n            }\n\n            t.buildEditor();\n            t.buildBtnPane();\n\n            t.fixedBtnPaneEvents();\n\n            t.buildOverlay();\n\n            setTimeout(function () {\n                if (t.disabled) {\n                    t.setDisabled(true);\n                }\n                t.$c.trigger('tbwinit');\n            });\n        },\n\n        addBtnDef: function (btnName, btnDef) {\n            this.btnsDef[btnName] = $.extend(btnDef, this.btnsDef[btnName] || {});\n        },\n\n        setupUrlPrefix: function () {\n            var protocol = this.o.urlProtocol;\n            if (!protocol) {\n                return;\n            }\n\n            if (typeof (protocol) !== 'string') {\n                return 'https://';\n            }\n            return protocol.replace('://', '') + '://';\n        },\n\n        buildEditor: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                html = '';\n\n            t.$box = $('<div/>', {\n                class: prefix + 'box ' + prefix + 'editor-visible ' + prefix + t.o.lang + ' trumbowyg'\n            });\n\n            // $ta = Textarea\n            // $ed = Editor\n            t.isTextarea = t.$ta.is('textarea');\n            if (t.isTextarea) {\n                html = t.$ta.val();\n                t.$ed = $('<div/>');\n                t.$box\n                    .insertAfter(t.$ta)\n                    .append(t.$ed, t.$ta);\n            } else {\n                t.$ed = t.$ta;\n                html = t.$ed.html();\n\n                t.$ta = $('<textarea/>', {\n                    name: t.$ta.attr('id'),\n                    height: t.height\n                }).val(html);\n\n                t.$box\n                    .insertAfter(t.$ed)\n                    .append(t.$ta, t.$ed);\n                t.syncCode();\n            }\n\n            t.$ta\n                .addClass(prefix + 'textarea')\n                .attr('tabindex', -1)\n            ;\n\n            t.$ed\n                .addClass(prefix + 'editor')\n                .attr({\n                    contenteditable: true,\n                    dir: t.lang._dir || 'ltr'\n                })\n                .html(html)\n            ;\n\n            if (t.o.tabindex) {\n                t.$ed.attr('tabindex', t.o.tabindex);\n            }\n\n            if (t.$c.is('[placeholder]')) {\n                t.$ed.attr('placeholder', t.$c.attr('placeholder'));\n            }\n\n            if (t.$c.is('[spellcheck]')) {\n                t.$ed.attr('spellcheck', t.$c.attr('spellcheck'));\n            }\n\n            if (t.o.resetCss) {\n                t.$ed.addClass(prefix + 'reset-css');\n            }\n\n            if (!t.o.autogrow) {\n                t.$ta.add(t.$ed).css({\n                    height: t.height\n                });\n            }\n\n            t.semanticCode();\n\n            if (t.o.autogrowOnEnter) {\n                t.$ed.addClass(prefix + 'autogrow-on-enter');\n            }\n\n            var ctrl = false,\n                composition = false,\n                debounceButtonPaneStatus;\n\n            t.$ed\n                .on('dblclick', 'img', t.o.imgDblClickHandler)\n                .on('keydown', function (e) {\n                    // append flags to differentiate Chrome spans\n                    var keyCode = e.which;\n                    if (keyCode === 8 || keyCode === 13 || keyCode === 46) {\n                        t.toggleSpan(true);\n                    }\n                    if ((e.ctrlKey || e.metaKey) && !e.altKey) {\n                        ctrl = true;\n                        var key = t.keys[String.fromCharCode(e.which).toUpperCase()];\n\n                        try {\n                            t.execCmd(key.fn, key.param);\n                            return false;\n                        } catch (c) {\n                        }\n                    } else {\n                        if (t.o.tabToIndent && e.key === 'Tab') {\n                            try {\n                                if (e.shiftKey) {\n                                    t.execCmd('outdent', true, null);\n                                } else {\n                                    t.execCmd('indent', true, null);\n                                }\n                                return false;\n                            } catch (c) {\n                            }\n                        }\n                    }\n                })\n                .on('compositionstart compositionupdate', function () {\n                    composition = true;\n                })\n                .on('keyup compositionend', function (e) {\n                    if (e.type === 'compositionend') {\n                        composition = false;\n                    } else if (composition) {\n                        return;\n                    }\n\n                    var keyCode = e.which;\n\n                    if (keyCode >= 37 && keyCode <= 40) {\n                        return;\n                    }\n\n                    // remove Chrome generated span tags\n                    if (keyCode === 8 || keyCode === 13 || keyCode === 46) {\n                        t.toggleSpan();\n                    }\n\n                    if ((e.ctrlKey || e.metaKey) && (keyCode === 89 || keyCode === 90)) {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwchange');\n                    } else if (!ctrl && keyCode !== 17) {\n                        var compositionEndIE = t.isIE ? e.type === 'compositionend' : true;\n                        t.semanticCode(false, compositionEndIE && keyCode === 13);\n                        t.$c.trigger('tbwchange');\n                    } else if (typeof e.which === 'undefined') {\n                        t.semanticCode(false, false, true);\n                    }\n\n                    setTimeout(function () {\n                        ctrl = false;\n                    }, 50);\n                })\n                .on('mouseup keydown keyup', function (e) {\n                    if ((!e.ctrlKey && !e.metaKey) || e.altKey) {\n                        setTimeout(function () { // \"hold on\" to the ctrl key for 50ms\n                            ctrl = false;\n                        }, 50);\n                    }\n                    clearTimeout(debounceButtonPaneStatus);\n                    debounceButtonPaneStatus = setTimeout(function () {\n                        t.updateButtonPaneStatus();\n                    }, 50);\n                })\n                .on('focus blur', function (e) {\n                    if (e.type === 'blur') {\n                        t.clearButtonPaneStatus();\n                    }\n                    t.$c.trigger('tbw' + e.type);\n                    if (t.o.autogrowOnEnter) {\n                        if (t.autogrowOnEnterDontClose) {\n                            return;\n                        }\n                        if (e.type === 'focus') {\n                            t.autogrowOnEnterWasFocused = true;\n                            t.autogrowEditorOnEnter();\n                        } else if (!t.o.autogrow) {\n                            t.$ed.css({height: t.$ed.css('min-height')});\n                            t.$c.trigger('tbwresize');\n                        }\n                    }\n                })\n                .on('keyup focus', function () {\n                  if (!t.$ta.val().match(/<.*>/) && !t.$ed.html().match(/<.*>/)) {\n                        setTimeout(function () {\n                            var block = t.isIE ? '<p>' : 'p';\n                            t.doc.execCommand('formatBlock', false, block);\n                            t.syncCode();\n                        }, 0);\n                    }\n                })\n                .on('cut drop', function () {\n                    setTimeout(function () {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                })\n                .on('paste', function (e) {\n                    if (t.o.removeformatPasted) {\n                        e.preventDefault();\n\n                        if (window.getSelection && window.getSelection().deleteFromDocument) {\n                            window.getSelection().deleteFromDocument();\n                        }\n\n                        try {\n                            // IE\n                            var text = window.clipboardData.getData('Text');\n\n                            try {\n                                // <= IE10\n                                t.doc.selection.createRange().pasteHTML(text);\n                            } catch (c) {\n                                // IE 11\n                                t.doc.getSelection().getRangeAt(0).insertNode(t.doc.createTextNode(text));\n                            }\n                            t.$c.trigger('tbwchange', e);\n                        } catch (d) {\n                            // Not IE\n                            t.execCmd('insertText', (e.originalEvent || e).clipboardData.getData('text/plain'));\n                        }\n                    }\n\n                    // Call pasteHandlers\n                    $.each(t.pasteHandlers, function (i, pasteHandler) {\n                        pasteHandler(e);\n                    });\n\n                    setTimeout(function () {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwpaste', e);\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                });\n\n            t.$ta\n                .on('keyup', function () {\n                    t.$c.trigger('tbwchange');\n                })\n                .on('paste', function () {\n                    setTimeout(function () {\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                });\n\n            $(t.doc.body).on('keydown.' + t.eventNamespace, function (e) {\n                if (e.which === 27 && $('.' + prefix + 'modal-box').length >= 1) {\n                    t.closeModal();\n                    return false;\n                }\n            });\n        },\n\n        //autogrow when entering logic\n        autogrowEditorOnEnter: function () {\n            var t = this;\n            t.$ed.removeClass('autogrow-on-enter');\n            var oldHeight = t.$ed[0].clientHeight;\n            t.$ed.height('auto');\n            var totalHeight = t.$ed[0].scrollHeight;\n            t.$ed.addClass('autogrow-on-enter');\n            if (oldHeight !== totalHeight) {\n                t.$ed.height(oldHeight);\n                setTimeout(function () {\n                    t.$ed.css({height: totalHeight});\n                    t.$c.trigger('tbwresize');\n                }, 0);\n            }\n        },\n\n\n        // Build button pane, use o.btns option\n        buildBtnPane: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            var $btnPane = t.$btnPane = $('<div/>', {\n                class: prefix + 'button-pane'\n            });\n\n            $.each(t.o.btns, function (i, btnGrp) {\n                if (!$.isArray(btnGrp)) {\n                    btnGrp = [btnGrp];\n                }\n\n                var $btnGroup = $('<div/>', {\n                    class: prefix + 'button-group ' + ((btnGrp.indexOf('fullscreen') >= 0) ? prefix + 'right' : '')\n                });\n                $.each(btnGrp, function (i, btn) {\n                    try { // Prevent buildBtn error\n                        if (t.isSupportedBtn(btn)) { // It's a supported button\n                            $btnGroup.append(t.buildBtn(btn));\n                        }\n                    } catch (c) {\n                    }\n                });\n\n                if ($btnGroup.html().trim().length > 0) {\n                    $btnPane.append($btnGroup);\n                }\n            });\n\n            t.$box.prepend($btnPane);\n        },\n\n\n        // Build a button and his action\n        buildBtn: function (btnName) { // btnName is name of the button\n            var t = this,\n                prefix = t.o.prefix,\n                btn = t.btnsDef[btnName],\n                isDropdown = btn.dropdown,\n                hasIcon = btn.hasIcon != null ? btn.hasIcon : true,\n                textDef = t.lang[btnName] || btnName,\n\n                $btn = $('<button/>', {\n                    type: 'button',\n                    class: prefix + btnName + '-button ' + (btn.class || '') + (!hasIcon ? ' ' + prefix + 'textual-button' : ''),\n                    html: t.hasSvg && hasIcon ?\n                        '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' :\n                        t.hideButtonTexts ? '' : (btn.text || btn.title || t.lang[btnName] || btnName),\n                    title: (btn.title || btn.text || textDef) + (btn.key ? ' (' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : ''),\n                    tabindex: -1,\n                    mousedown: function () {\n                        if (!isDropdown || $('.' + btnName + '-' + prefix + 'dropdown', t.$box).is(':hidden')) {\n                            $('body', t.doc).trigger('mousedown');\n                        }\n\n                        if ((t.$btnPane.hasClass(prefix + 'disable') || t.$box.hasClass(prefix + 'disabled')) &&\n                            !$(this).hasClass(prefix + 'active') &&\n                            !$(this).hasClass(prefix + 'not-disable')) {\n                            return false;\n                        }\n\n                        t.execCmd((isDropdown ? 'dropdown' : false) || btn.fn || btnName, btn.param || btnName, btn.forceCss);\n\n                        return false;\n                    }\n                });\n\n            if (isDropdown) {\n                $btn.addClass(prefix + 'open-dropdown');\n                var dropdownPrefix = prefix + 'dropdown',\n                    dropdownOptions = { // the dropdown\n                        class: dropdownPrefix + '-' + btnName + ' ' + dropdownPrefix + ' ' + prefix + 'fixed-top ' + (btn.dropdownClass || '')\n                    };\n                dropdownOptions['data-' + dropdownPrefix] = btnName;\n                var $dropdown = $('<div/>', dropdownOptions);\n                $.each(isDropdown, function (i, def) {\n                    if (t.btnsDef[def] && t.isSupportedBtn(def)) {\n                        $dropdown.append(t.buildSubBtn(def));\n                    }\n                });\n                t.$box.append($dropdown.hide());\n            } else if (btn.key) {\n                t.keys[btn.key] = {\n                    fn: btn.fn || btnName,\n                    param: btn.param || btnName\n                };\n            }\n\n            if (!isDropdown) {\n                t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n            }\n\n            return $btn;\n        },\n        // Build a button for dropdown menu\n        // @param n : name of the subbutton\n        buildSubBtn: function (btnName) {\n            var t = this,\n                prefix = t.o.prefix,\n                btn = t.btnsDef[btnName],\n                hasIcon = btn.hasIcon != null ? btn.hasIcon : true;\n\n            if (btn.key) {\n                t.keys[btn.key] = {\n                    fn: btn.fn || btnName,\n                    param: btn.param || btnName\n                };\n            }\n\n            t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n\n            return $('<button/>', {\n                type: 'button',\n                class: prefix + btnName + '-dropdown-button ' + (btn.class || '') + (btn.ico ? ' ' + prefix + btn.ico + '-button' : ''),\n                html: t.hasSvg && hasIcon ?\n                    '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' + (btn.text || btn.title || t.lang[btnName] || btnName) :\n                    (btn.text || btn.title || t.lang[btnName] || btnName),\n                title: (btn.key ? '(' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : null),\n                style: btn.style || null,\n                mousedown: function () {\n                    $('body', t.doc).trigger('mousedown');\n\n                    t.execCmd(btn.fn || btnName, btn.param || btnName, btn.forceCss);\n\n                    return false;\n                }\n            });\n        },\n        // Check if button is supported\n        isSupportedBtn: function (btnName) {\n            try {\n                return this.btnsDef[btnName].isSupported();\n            } catch (e) {\n            }\n            return true;\n        },\n\n        // Build overlay for modal box\n        buildOverlay: function () {\n            var t = this;\n            t.$overlay = $('<div/>', {\n                class: t.o.prefix + 'overlay'\n            }).appendTo(t.$box);\n            return t.$overlay;\n        },\n        showOverlay: function () {\n            var t = this;\n            $(window).trigger('scroll');\n            t.$overlay.fadeIn(200);\n            t.$box.addClass(t.o.prefix + 'box-blur');\n        },\n        hideOverlay: function () {\n            var t = this;\n            t.$overlay.fadeOut(50);\n            t.$box.removeClass(t.o.prefix + 'box-blur');\n        },\n\n        // Management of fixed button pane\n        fixedBtnPaneEvents: function () {\n            var t = this,\n                fixedFullWidth = t.o.fixedFullWidth,\n                $box = t.$box;\n\n            if (!t.o.fixedBtnPane) {\n                return;\n            }\n\n            t.isFixed = false;\n\n            $(window)\n                .on('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace, function () {\n                    if (!$box) {\n                        return;\n                    }\n\n                    t.syncCode();\n\n                    var scrollTop = $(window).scrollTop(),\n                        offset = $box.offset().top + 1,\n                        $buttonPane = t.$btnPane,\n                        buttonPaneOuterHeight = $buttonPane.outerHeight() - 2;\n\n                    if ((scrollTop - offset > 0) && ((scrollTop - offset - t.height) < 0)) {\n                        if (!t.isFixed) {\n                            t.isFixed = true;\n                            $buttonPane.css({\n                                position: 'fixed',\n                                top: 0,\n                                left: fixedFullWidth ? 0 : 'auto',\n                                zIndex: 7\n                            });\n                            t.$box.css({paddingTop: $buttonPane.height()});\n                        }\n                        $buttonPane.css({\n                            width: fixedFullWidth ? '100%' : (($box.width() - 1))\n                        });\n\n                        $('.' + t.o.prefix + 'fixed-top', $box).css({\n                            position: fixedFullWidth ? 'fixed' : 'absolute',\n                            top: fixedFullWidth ? buttonPaneOuterHeight : buttonPaneOuterHeight + (scrollTop - offset),\n                            zIndex: 15\n                        });\n                    } else if (t.isFixed) {\n                        t.isFixed = false;\n                        $buttonPane.removeAttr('style');\n                        t.$box.css({paddingTop: 0});\n                        $('.' + t.o.prefix + 'fixed-top', $box).css({\n                            position: 'absolute',\n                            top: buttonPaneOuterHeight\n                        });\n                    }\n                });\n        },\n\n        // Disable editor\n        setDisabled: function (disable) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            t.disabled = disable;\n\n            if (disable) {\n                t.$ta.attr('disabled', true);\n            } else {\n                t.$ta.removeAttr('disabled');\n            }\n            t.$box.toggleClass(prefix + 'disabled', disable);\n            t.$ed.attr('contenteditable', !disable);\n        },\n\n        // Destroy the editor\n        destroy: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            if (t.isTextarea) {\n                t.$box.after(\n                    t.$ta\n                        .css({height: ''})\n                        .val(t.html())\n                        .removeClass(prefix + 'textarea')\n                        .show()\n                );\n            } else {\n                t.$box.after(\n                    t.$ed\n                        .css({height: ''})\n                        .removeClass(prefix + 'editor')\n                        .removeAttr('contenteditable')\n                        .removeAttr('dir')\n                        .html(t.html())\n                        .show()\n                );\n            }\n\n            t.$ed.off('dblclick', 'img');\n\n            t.destroyPlugins();\n\n            t.$box.remove();\n            t.$c.removeData('trumbowyg');\n            $('body').removeClass(prefix + 'body-fullscreen');\n            t.$c.trigger('tbwclose');\n            $(window).off('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace);\n            $(t.doc.body).off('keydown.' + t.eventNamespace);\n        },\n\n\n        // Empty the editor\n        empty: function () {\n            this.$ta.val('');\n            this.syncCode(true);\n        },\n\n\n        // Function call when click on viewHTML button\n        toggle: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            if (t.o.autogrowOnEnter) {\n                t.autogrowOnEnterDontClose = !t.$box.hasClass(prefix + 'editor-hidden');\n            }\n\n            t.semanticCode(false, true);\n            t.$c.trigger('tbwchange');\n\n            setTimeout(function () {\n                t.doc.activeElement.blur();\n                t.$box.toggleClass(prefix + 'editor-hidden ' + prefix + 'editor-visible');\n                t.$btnPane.toggleClass(prefix + 'disable');\n                $('.' + prefix + 'viewHTML-button', t.$btnPane).toggleClass(prefix + 'active');\n                if (t.$box.hasClass(prefix + 'editor-visible')) {\n                    t.$ta.attr('tabindex', -1);\n                } else {\n                    t.$ta.removeAttr('tabindex');\n                }\n\n                if (t.o.autogrowOnEnter && !t.autogrowOnEnterDontClose) {\n                    t.autogrowEditorOnEnter();\n                }\n            }, 0);\n        },\n\n        // Remove or add flags to span tags to remove Chrome generated spans\n        toggleSpan: function (addFlag) {\n            var t = this;\n            t.$ed.find('span').each(function () {\n                if (addFlag === true) {\n                    $(this).attr('data-tbw-flag', true);\n                } else {\n                    if ($(this).attr('data-tbw-flag')) {\n                        $(this).removeAttr('data-tbw-flag');\n                    } else {\n                        $(this).contents().unwrap();\n                    }\n                }\n            });\n        },\n\n        // Open dropdown when click on a button which open that\n        dropdown: function (name) {\n            var t = this,\n                $body = $('body', t.doc),\n                prefix = t.o.prefix,\n                $dropdown = $('[data-' + prefix + 'dropdown=' + name + ']', t.$box),\n                $btn = $('.' + prefix + name + '-button', t.$btnPane),\n                show = $dropdown.is(':hidden');\n\n            $body.trigger('mousedown');\n\n            if (show) {\n                var btnOffsetLeft = $btn.offset().left;\n                $btn.addClass(prefix + 'active');\n\n                $dropdown.css({\n                    position: 'absolute',\n                    top: $btn.offset().top - t.$btnPane.offset().top + $btn.outerHeight(),\n                    left: (t.o.fixedFullWidth && t.isFixed) ? btnOffsetLeft : (btnOffsetLeft - t.$btnPane.offset().left)\n                }).show();\n\n                $(window).trigger('scroll');\n\n                $body.on('mousedown.' + t.eventNamespace, function (e) {\n                    if (!$dropdown.is(e.target)) {\n                        $('.' + prefix + 'dropdown', t.$box).hide();\n                        $('.' + prefix + 'active', t.$btnPane).removeClass(prefix + 'active');\n                        $body.off('mousedown.' + t.eventNamespace);\n                    }\n                });\n            }\n        },\n\n\n        // HTML Code management\n        html: function (html) {\n            var t = this;\n\n            if (html != null) {\n                t.$ta.val(html);\n                t.syncCode(true);\n                t.$c.trigger('tbwchange');\n                return t;\n            }\n\n            return t.$ta.val();\n        },\n        syncTextarea: function () {\n            var t = this;\n            t.$ta.val(t.$ed.text().trim().length > 0 || t.$ed.find(t.o.tagsToKeep.join(',')).length > 0 ? t.$ed.html() : '');\n        },\n        syncCode: function (force) {\n            var t = this;\n            if (!force && t.$ed.is(':visible')) {\n                t.syncTextarea();\n            } else {\n                // wrap the content in a div it's easier to get the inner html\n                var html = $('<div>').html(t.$ta.val());\n                // scrub the html before loading into the doc\n                var safe = $('<div>').append(html);\n                $(t.o.tagsToRemove.join(','), safe).remove();\n                t.$ed.html(safe.contents().html());\n            }\n\n            if (t.o.autogrow) {\n                t.height = t.$ed.height();\n                if (t.height !== t.$ta.css('height')) {\n                    t.$ta.css({height: t.height});\n                    t.$c.trigger('tbwresize');\n                }\n            }\n            if (t.o.autogrowOnEnter) {\n                t.$ed.height('auto');\n                var totalHeight = t.autogrowOnEnterWasFocused ? t.$ed[0].scrollHeight : t.$ed.css('min-height');\n                if (totalHeight !== t.$ta.css('height')) {\n                    t.$ed.css({height: totalHeight});\n                    t.$c.trigger('tbwresize');\n                }\n            }\n        },\n\n        // Analyse and update to semantic code\n        // @param force : force to sync code from textarea\n        // @param full  : wrap text nodes in <p>\n        // @param keepRange  : leave selection range as it is\n        semanticCode: function (force, full, keepRange) {\n            var t = this;\n            t.saveRange();\n            t.syncCode(force);\n\n            var restoreRange = true;\n            if (t.range && t.range.collapsed) {\n                restoreRange = false;\n            }\n\n            if (t.o.semantic) {\n                t.semanticTag('b', t.o.semanticKeepAttributes);\n                t.semanticTag('i', t.o.semanticKeepAttributes);\n                t.semanticTag('s', t.o.semanticKeepAttributes);\n                t.semanticTag('strike', t.o.semanticKeepAttributes);\n\n                if (full) {\n                    var inlineElementsSelector = t.o.inlineElementsSelector,\n                        blockElementsSelector = ':not(' + inlineElementsSelector + ')';\n\n                    // Wrap text nodes in span for easier processing\n                    t.$ed.contents().filter(function () {\n                        return this.nodeType === 3 && this.nodeValue.trim().length > 0;\n                    }).wrap('<span data-tbw/>');\n\n                    // Wrap groups of inline elements in paragraphs (recursive)\n                    var wrapInlinesInParagraphsFrom = function ($from) {\n                        if ($from.length !== 0) {\n                            var $finalParagraph = $from.nextUntil(blockElementsSelector).addBack().wrapAll('<p/>').parent(),\n                                $nextElement = $finalParagraph.nextAll(inlineElementsSelector).first();\n                            $finalParagraph.next('br').remove();\n                            wrapInlinesInParagraphsFrom($nextElement);\n                        }\n                    };\n                    wrapInlinesInParagraphsFrom(t.$ed.children(inlineElementsSelector).first());\n\n                    t.semanticTag('div', true);\n\n                    // Get rid of temporary span's\n                    $('[data-tbw]', t.$ed).contents().unwrap();\n\n                    // Remove empty <p>\n                    t.$ed.find('p:empty').remove();\n                }\n\n                if (!keepRange && restoreRange) {\n                    t.restoreRange();\n                }\n\n                t.syncTextarea();\n            }\n        },\n\n        semanticTag: function (oldTag, copyAttributes, revert) {\n            var newTag, t = this;\n            var tmpTag = oldTag;\n\n            if (this.o.semantic != null && typeof this.o.semantic === 'object' && this.o.semantic.hasOwnProperty(oldTag)) {\n                newTag = this.o.semantic[oldTag];\n            } else if (this.o.semantic === true && this.DEFAULT_SEMANTIC_MAP.hasOwnProperty(oldTag)) {\n                newTag = this.DEFAULT_SEMANTIC_MAP[oldTag];\n            } else {\n                return;\n            }\n\n            if(revert) {\n                oldTag = newTag;\n                newTag = tmpTag;\n            }\n\n            $(oldTag, this.$ed).each(function () {\n                var resetRange = false;\n                var $oldTag = $(this);\n                if ($oldTag.contents().length === 0) {\n                    return false;\n                }\n\n                if(t.range.startContainer.parentNode && t.range.startContainer.parentNode === this) {\n                    resetRange = true;\n                }\n                var $newTag = $('<' + newTag + '/>');\n                $newTag.insertBefore($oldTag);\n                if (copyAttributes) {\n                    $.each($oldTag.prop('attributes'), function () {\n                        $newTag.attr(this.name, this.value);\n                    });\n                }\n                $newTag.html($oldTag.html());\n                $oldTag.remove();\n                if(resetRange === true) {\n                    t.range.selectNodeContents($newTag.get(0));\n                    t.range.collapse(false);\n                }\n            });\n        },\n\n        // Function call when user click on \"Insert Link\"\n        createLink: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection(),\n                selectedRange = documentSelection.getRangeAt(0),\n                node = documentSelection.focusNode,\n                text = new XMLSerializer().serializeToString(selectedRange.cloneContents()) || selectedRange + '',\n                url,\n                title,\n                target;\n\n            while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n                node = node.parentNode;\n            }\n\n            if (node && node.nodeName === 'A') {\n                var $a = $(node);\n                text = $a.text();\n                url = $a.attr('href');\n                if (!t.o.minimalLinks) {\n                    title = $a.attr('title');\n                    target = $a.attr('target') || t.o.defaultLinkTarget;\n                }\n                var range = t.doc.createRange();\n                range.selectNode(node);\n                documentSelection.removeAllRanges();\n                documentSelection.addRange(range);\n            }\n\n            t.saveRange();\n\n            var options = {\n                url: {\n                    label: t.lang.linkUrl || 'URL',\n                    required: true,\n                    value: url\n                },\n                text: {\n                    label: t.lang.text,\n                    value: text\n                }\n            };\n            if (!t.o.minimalLinks) {\n                $.extend(options, {\n                    title: {\n                        label: t.lang.title,\n                        value: title\n                    },\n                    target: {\n                        label: t.lang.target,\n                        value: target\n                    }\n                });\n            }\n\n            t.openModalInsert(t.lang.createLink, options, function (v) { // v is value\n                var url = t.prependUrlPrefix(v.url);\n                if (!url.length) {\n                    return false;\n                }\n\n                var link = $(['<a href=\"', url, '\">', v.text || v.url, '</a>'].join(''));\n\n                if (v.title) {\n                    link.attr('title', v.title);\n                }\n                if (v.target || t.o.defaultLinkTarget) {\n                    link.attr('target', v.target || t.o.defaultLinkTarget);\n                }\n                t.range.deleteContents();\n                t.range.insertNode(link[0]);\n                t.syncCode();\n                t.$c.trigger('tbwchange');\n                return true;\n            });\n        },\n        prependUrlPrefix: function (url) {\n            var t = this;\n            if (!t.urlPrefix) {\n                return url;\n            }\n\n            var VALID_LINK_PREFIX = /^([a-z][-+.a-z0-9]*:|\\/|#)/i;\n            if (VALID_LINK_PREFIX.test(url)) {\n                return url;\n            }\n\n            var SIMPLE_EMAIL_REGEX = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n            if (SIMPLE_EMAIL_REGEX.test(url)) {\n                return 'mailto:' + url;\n            }\n\n            return t.urlPrefix + url;\n        },\n        unlink: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection(),\n                node = documentSelection.focusNode;\n\n            if (documentSelection.isCollapsed) {\n                while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n                    node = node.parentNode;\n                }\n\n                if (node && node.nodeName === 'A') {\n                    var range = t.doc.createRange();\n                    range.selectNode(node);\n                    documentSelection.removeAllRanges();\n                    documentSelection.addRange(range);\n                }\n            }\n            t.execCmd('unlink', undefined, undefined, true);\n        },\n        insertImage: function () {\n            var t = this;\n            t.saveRange();\n\n            var options = {\n                url: {\n                    label: 'URL',\n                    required: true\n                },\n                alt: {\n                    label: t.lang.description,\n                    value: t.getRangeText()\n                }\n            };\n\n            if (t.o.imageWidthModalEdit) {\n                options.width = {};\n            }\n\n            t.openModalInsert(t.lang.insertImage, options, function (v) { // v are values\n                t.execCmd('insertImage', v.url, false, true);\n                var $img = $('img[src=\"' + v.url + '\"]:not([alt])', t.$box);\n                $img.attr('alt', v.alt);\n\n                if (t.o.imageWidthModalEdit) {\n                    $img.attr({\n                        width: v.width\n                    });\n                }\n\n                t.syncCode();\n                t.$c.trigger('tbwchange');\n\n                return true;\n            });\n        },\n        fullscreen: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                fullscreenCssClass = prefix + 'fullscreen',\n                fullscreenPlaceholderClass = fullscreenCssClass + '-placeholder',\n                isFullscreen,\n                editorHeight = t.$box.outerHeight();\n\n            t.$box.toggleClass(fullscreenCssClass);\n            isFullscreen = t.$box.hasClass(fullscreenCssClass);\n\n            if (isFullscreen) {\n                t.$box.before(\n                    $('<div/>', {\n                        class: fullscreenPlaceholderClass\n                    }).css({\n                        height: editorHeight\n                    })\n                );\n            } else {\n                $('.' + fullscreenPlaceholderClass).remove();\n            }\n\n            $('body').toggleClass(prefix + 'body-fullscreen', isFullscreen);\n            $(window).trigger('scroll');\n            t.$c.trigger('tbw' + (isFullscreen ? 'open' : 'close') + 'fullscreen');\n        },\n\n\n        /*\n         * Call method of trumbowyg if exist\n         * else try to call anonymous function\n         * and finally native execCommand\n         */\n        execCmd: function (cmd, param, forceCss, skipTrumbowyg) {\n            var t = this;\n            skipTrumbowyg = !!skipTrumbowyg || '';\n\n            if (cmd !== 'dropdown') {\n                t.$ed.focus();\n            }\n\n            if(cmd === 'strikethrough' && t.o.semantic) {\n                t.semanticTag('strike', t.o.semanticKeepAttributes, true); // browsers cannot undo e.g. <del> as they expect <strike>\n            }\n\n            try {\n                t.doc.execCommand('styleWithCSS', false, forceCss || false);\n            } catch (c) {\n            }\n\n            try {\n                t[cmd + skipTrumbowyg](param);\n            } catch (c) {\n                try {\n                    cmd(param);\n                } catch (e2) {\n                    if (cmd === 'insertHorizontalRule') {\n                        param = undefined;\n                    } else if (cmd === 'formatBlock' && t.isIE) {\n                        param = '<' + param + '>';\n                    }\n\n                    t.doc.execCommand(cmd, false, param);\n\n                    t.syncCode();\n                    t.semanticCode(false, true);\n                    try {\n                        var listId = window.getSelection().focusNode;\n                        if(!$(window.getSelection().focusNode.parentNode).hasClass('trumbowyg-editor')){\n                            listId = window.getSelection().focusNode.parentNode;\n                        }\n                        var classes = t.o.tagClasses[param];\n                        if (classes) {\n                            $(listId).addClass(classes);\n                        }\n                    } catch (e) {\n\n                    }\n\n                }\n\n                if (cmd !== 'dropdown') {\n                    t.updateButtonPaneStatus();\n                    t.$c.trigger('tbwchange');\n                }\n            }\n        },\n\n\n        // Open a modal box\n        openModal: function (title, content, buildForm) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            buildForm = buildForm !== false;\n\n            // No open a modal box when exist other modal box\n            if ($('.' + prefix + 'modal-box', t.$box).length > 0) {\n                return false;\n            }\n            if (t.o.autogrowOnEnter) {\n                t.autogrowOnEnterDontClose = true;\n            }\n\n            t.saveRange();\n            t.showOverlay();\n\n            // Disable all btnPane btns\n            t.$btnPane.addClass(prefix + 'disable');\n\n            // Build out of ModalBox, it's the mask for animations\n            var $modal = $('<div/>', {\n                class: prefix + 'modal ' + prefix + 'fixed-top'\n            }).css({\n                top: t.$box.offset().top + t.$btnPane.height(),\n                zIndex: 99999\n            }).appendTo($(t.doc.body));\n\n            // Click on overlay close modal by cancelling them\n            t.$overlay.one('click', function () {\n                $modal.trigger(CANCEL_EVENT);\n                return false;\n            });\n\n            // Build the form\n            var formOrContent;\n            if (buildForm) {\n                formOrContent = $('<form/>', {\n                    action: '',\n                    html: content\n                })\n                    .on('submit', function () {\n                        $modal.trigger(CONFIRM_EVENT);\n                        return false;\n                    })\n                    .on('reset', function () {\n                        $modal.trigger(CANCEL_EVENT);\n                        return false;\n                    })\n                    .on('submit reset', function () {\n                        if (t.o.autogrowOnEnter) {\n                            t.autogrowOnEnterDontClose = false;\n                        }\n                    });\n            } else {\n                formOrContent = content;\n            }\n\n\n            // Build ModalBox and animate to show them\n            var $box = $('<div/>', {\n                class: prefix + 'modal-box',\n                html: formOrContent\n            })\n                .css({\n                    top: '-' + t.$btnPane.outerHeight(),\n                    opacity: 0,\n                    paddingBottom: buildForm ? null : '5%',\n                })\n                .appendTo($modal)\n                .animate({\n                    top: 0,\n                    opacity: 1\n                }, 100);\n\n\n            // Append title\n            if (title) {\n                $('<span/>', {\n                    text: title,\n                    class: prefix + 'modal-title'\n                }).prependTo($box);\n            }\n\n            if (buildForm) {\n                // Focus in modal box\n                $('input:first', $box).focus();\n\n                // Append Confirm and Cancel buttons\n                t.buildModalBtn('submit', $box);\n                t.buildModalBtn('reset', $box);\n\n                $modal.height($box.outerHeight() + 10);\n            }\n\n            $(window).trigger('scroll');\n            t.$c.trigger('tbwmodalopen');\n\n            return $modal;\n        },\n        // @param n is name of modal\n        buildModalBtn: function (n, $modal) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            return $('<button/>', {\n                class: prefix + 'modal-button ' + prefix + 'modal-' + n,\n                type: n,\n                text: t.lang[n] || n\n            }).appendTo($('form', $modal));\n        },\n        // close current modal box\n        closeModal: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            t.$btnPane.removeClass(prefix + 'disable');\n            t.$overlay.off();\n\n            // Find the modal box\n            var $modalBox = $('.' + prefix + 'modal-box', $(t.doc.body));\n\n            $modalBox.animate({\n                top: '-' + $modalBox.height()\n            }, 100, function () {\n                $modalBox.parent().remove();\n                t.hideOverlay();\n                t.$c.trigger('tbwmodalclose');\n            });\n\n            t.restoreRange();\n        },\n        // Pre-formatted build and management modal\n        openModalInsert: function (title, fields, cmd) {\n            var t = this,\n                prefix = t.o.prefix,\n                lg = t.lang,\n                html = '';\n\n            $.each(fields, function (fieldName, field) {\n                var l = field.label || fieldName,\n                    n = field.name || fieldName,\n                    a = field.attributes || {};\n\n                var attr = Object.keys(a).map(function (prop) {\n                    return prop + '=\"' + a[prop] + '\"';\n                }).join(' ');\n\n                html += '<label><input type=\"' + (field.type || 'text') + '\" name=\"' + n + '\"' +\n                    (field.type === 'checkbox' && field.value ? ' checked=\"checked\"' : ' value=\"' + (field.value || '').replace(/\"/g, '&quot;')) +\n                    '\"' + attr + '><span class=\"' + prefix + 'input-infos\"><span>' +\n                    (lg[l] ? lg[l] : l) +\n                    '</span></span></label>';\n            });\n\n            return t.openModal(title, html)\n                .on(CONFIRM_EVENT, function () {\n                    var $form = $('form', $(this)),\n                        valid = true,\n                        values = {};\n\n                    $.each(fields, function (fieldName, field) {\n                        var n = field.name || fieldName;\n\n                        var $field = $('input[name=\"' + n + '\"]', $form),\n                            inputType = $field.attr('type');\n\n                        switch (inputType.toLowerCase()) {\n                            case 'checkbox':\n                                values[n] = $field.is(':checked');\n                                break;\n                            case 'radio':\n                                values[n] = $field.filter(':checked').val();\n                                break;\n                            default:\n                                values[n] = $.trim($field.val());\n                                break;\n                        }\n                        // Validate value\n                        if (field.required && values[n] === '') {\n                            valid = false;\n                            t.addErrorOnModalField($field, t.lang.required);\n                        } else if (field.pattern && !field.pattern.test(values[n])) {\n                            valid = false;\n                            t.addErrorOnModalField($field, field.patternError);\n                        }\n                    });\n\n                    if (valid) {\n                        t.restoreRange();\n\n                        if (cmd(values, fields)) {\n                            t.syncCode();\n                            t.$c.trigger('tbwchange');\n                            t.closeModal();\n                            $(this).off(CONFIRM_EVENT);\n                        }\n                    }\n                })\n                .one(CANCEL_EVENT, function () {\n                    $(this).off(CONFIRM_EVENT);\n                    t.closeModal();\n                });\n        },\n        addErrorOnModalField: function ($field, err) {\n            var prefix = this.o.prefix,\n                spanErrorClass = prefix + 'msg-error',\n                $label = $field.parent();\n\n            $field\n                .on('change keyup', function () {\n                    $label.removeClass(prefix + 'input-error');\n                    setTimeout(function () {\n                        $label.find('.' + spanErrorClass).remove();\n                    }, 150);\n                });\n\n            $label\n                .addClass(prefix + 'input-error')\n                .find('input+span')\n                .append(\n                    $('<span/>', {\n                        class: spanErrorClass,\n                        text: err\n                    })\n                );\n        },\n\n        getDefaultImgDblClickHandler: function () {\n            var t = this;\n\n            return function () {\n                var $img = $(this),\n                    src = $img.attr('src'),\n                    base64 = '(Base64)';\n\n                if (src.indexOf('data:image') === 0) {\n                    src = base64;\n                }\n\n                var options = {\n                    url: {\n                        label: 'URL',\n                        value: src,\n                        required: true\n                    },\n                    alt: {\n                        label: t.lang.description,\n                        value: $img.attr('alt')\n                    }\n                };\n\n                if (t.o.imageWidthModalEdit) {\n                    options.width = {\n                        value: $img.attr('width') ? $img.attr('width') : ''\n                    };\n                }\n\n                t.openModalInsert(t.lang.insertImage, options, function (v) {\n                    if (v.url !== base64) {\n                        $img.attr({\n                            src: v.url\n                        });\n                    }\n                    $img.attr({\n                        alt: v.alt\n                    });\n\n                    if (t.o.imageWidthModalEdit) {\n                        if (parseInt(v.width) > 0) {\n                            $img.attr({\n                                width: v.width\n                            });\n                        } else {\n                            $img.removeAttr('width');\n                        }\n                    }\n\n                    return true;\n                });\n                return false;\n            };\n        },\n\n        // Range management\n        saveRange: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection();\n\n            t.range = null;\n\n            if (!documentSelection || !documentSelection.rangeCount) {\n                return;\n            }\n\n            var savedRange = t.range = documentSelection.getRangeAt(0),\n                range = t.doc.createRange(),\n                rangeStart;\n            range.selectNodeContents(t.$ed[0]);\n            range.setEnd(savedRange.startContainer, savedRange.startOffset);\n            rangeStart = (range + '').length;\n            t.metaRange = {\n                start: rangeStart,\n                end: rangeStart + (savedRange + '').length\n            };\n        },\n        restoreRange: function () {\n            var t = this,\n                metaRange = t.metaRange,\n                savedRange = t.range,\n                documentSelection = t.doc.getSelection(),\n                range;\n\n            if (!savedRange) {\n                return;\n            }\n\n            if (metaRange && metaRange.start !== metaRange.end) { // Algorithm from http://jsfiddle.net/WeWy7/3/\n                var charIndex = 0,\n                    nodeStack = [t.$ed[0]],\n                    node,\n                    foundStart = false,\n                    stop = false;\n\n                range = t.doc.createRange();\n\n                while (!stop && (node = nodeStack.pop())) {\n                    if (node.nodeType === 3) {\n                        var nextCharIndex = charIndex + node.length;\n                        if (!foundStart && metaRange.start >= charIndex && metaRange.start <= nextCharIndex) {\n                            range.setStart(node, metaRange.start - charIndex);\n                            foundStart = true;\n                        }\n                        if (foundStart && metaRange.end >= charIndex && metaRange.end <= nextCharIndex) {\n                            range.setEnd(node, metaRange.end - charIndex);\n                            stop = true;\n                        }\n                        charIndex = nextCharIndex;\n                    } else {\n                        var cn = node.childNodes,\n                            i = cn.length;\n\n                        while (i > 0) {\n                            i -= 1;\n                            nodeStack.push(cn[i]);\n                        }\n                    }\n                }\n            }\n\n            // Fix IE11 Error 'Could not complete the operation due to error 800a025e'.\n            // https://stackoverflow.com/questions/16160996/could-not-complete-the-operation-due-to-error-800a025e\n            try {\n                documentSelection.removeAllRanges();\n            } catch (e) {\n            }\n\n            documentSelection.addRange(range || savedRange);\n        },\n        getRangeText: function () {\n            return this.range + '';\n        },\n\n        clearButtonPaneStatus: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                activeClasses = prefix + 'active-button ' + prefix + 'active',\n                originalIconClass = prefix + 'original-icon';\n\n            // Reset all buttons and dropdown state\n            $('.' + prefix + 'active-button', t.$btnPane).removeClass(activeClasses);\n            $('.' + originalIconClass, t.$btnPane).each(function () {\n                $(this).find('svg use').attr('xlink:href', $(this).data(originalIconClass));\n            });\n        },\n        updateButtonPaneStatus: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                activeClasses = prefix + 'active-button ' + prefix + 'active',\n                originalIconClass = prefix + 'original-icon',\n                tags = t.getTagsRecursive(t.doc.getSelection().focusNode);\n\n            t.clearButtonPaneStatus();\n\n            $.each(tags, function (i, tag) {\n                var btnName = t.tagToButton[tag.toLowerCase()],\n                    $btn = $('.' + prefix + btnName + '-button', t.$btnPane);\n\n                if ($btn.length > 0) {\n                    $btn.addClass(activeClasses);\n                } else {\n                    try {\n                        $btn = $('.' + prefix + 'dropdown .' + prefix + btnName + '-dropdown-button', t.$box);\n                        var $btnSvgUse = $btn.find('svg use'),\n                            dropdownBtnName = $btn.parent().data(prefix + 'dropdown'),\n                            $dropdownBtn = $('.' + prefix + dropdownBtnName + '-button', t.$box),\n                            $dropdownBtnSvgUse = $dropdownBtn.find('svg use');\n\n                        // Highlight the dropdown button\n                        $dropdownBtn.addClass(activeClasses);\n\n                        // Switch dropdown icon to the active sub-icon one\n                        if (t.o.changeActiveDropdownIcon && $btnSvgUse.length > 0) {\n                            // Save original icon\n                            $dropdownBtn\n                                .addClass(originalIconClass)\n                                .data(originalIconClass, $dropdownBtnSvgUse.attr('xlink:href'));\n\n                            // Put the active sub-button's icon\n                            $dropdownBtnSvgUse\n                                .attr('xlink:href', $btnSvgUse.attr('xlink:href'));\n                        }\n                    } catch (e) {\n                    }\n                }\n            });\n        },\n        getTagsRecursive: function (element, tags) {\n            var t = this;\n            tags = tags || (element && element.tagName ? [element.tagName] : []);\n\n            if (element && element.parentNode) {\n                element = element.parentNode;\n            } else {\n                return tags;\n            }\n\n            var tag = element.tagName;\n            if (tag === 'DIV') {\n                return tags;\n            }\n            if (tag === 'P' && element.style.textAlign !== '') {\n                tags.push(element.style.textAlign);\n            }\n\n            $.each(t.tagHandlers, function (i, tagHandler) {\n                tags = tags.concat(tagHandler(element, t));\n            });\n\n            tags.push(tag);\n\n            return t.getTagsRecursive(element, tags).filter(function (tag) {\n                return tag != null;\n            });\n        },\n\n        // Plugins\n        initPlugins: function () {\n            var t = this;\n            t.loadedPlugins = [];\n            $.each($.trumbowyg.plugins, function (name, plugin) {\n                if (!plugin.shouldInit || plugin.shouldInit(t)) {\n                    plugin.init(t);\n                    if (plugin.tagHandler) {\n                        t.tagHandlers.push(plugin.tagHandler);\n                    }\n                    t.loadedPlugins.push(plugin);\n                }\n            });\n        },\n        destroyPlugins: function () {\n            var t = this;\n            $.each(this.loadedPlugins, function (i, plugin) {\n                if (plugin.destroy) {\n                    plugin.destroy(t);\n                }\n            });\n        }\n    };\n})(navigator, window, document, jQuery);\n"],"sourceRoot":""}